# Travis Elixir PLT Generator [![Build Status](https://travis-ci.org/linearregression/travis_elixir_plt_generator.svg?branch=master)](https://travis-ci.org/linearregression/travis_elixir_plt_generator)

Generate PLTs for your Elixir project, so you can run Dialyzer on Travis without
slowing your builds.

Unless you have specific requirements, you should use these prebuilt PLTs over
here:
<https://github.com/danielberkompas/travis_elixir_plts>

## Settings
By default, the PLTs are generated by [dialyxir][dialyxir], and are compiled 
with the following apps:

- erts 
- kernel 
- stdlib 
- crypto 
- public_key
- elixir

The apps to be compiled can be customized in `mix.exs`, following [dialyxir's][dialyxir]
instructions.

## Usage
You must have an Amazon S3 account with a valid bucket name. Make sure that the
bucket was created in the "US Standard" region, or you'll encounter errors.

1. Fork this repository.
2. Set the following ENV vars for your fork on Travis:

```
ARTIFACTS_KEY=<AWS S3 Access Key>
ARTIFACTS_SECRET=<AWS S3 Access Secret>
ARTIFACTS_BUCKET=<AWS S3 Bucket Name>
```

3. Enable builds for your fork on Travis.
4. Watch your PLTs flow into a `travis_elixir_plts` folder in your bucket.

You can build for different combinations of Elixir and OTP by editing the
`.travis.yml` file.

[dialyxir]: https://github.com/jeremyjh/dialyxir
=======
# Dialyzer PLTs for Elixir on Travis CI

The persistent lookup tables in this repository were generated for various
versions of Elixir and OTP releases.  The file format is: 
`elixir-#{elixir_version}_#{otp_version}`.

## Sample .travis.yml

From my [blog post](http://blog.danielberkompas.com/elixir/2015/04/03/run-dialyzer-on-elixir-on-travis.html):

```yaml
language: elixir
otp_release:
  - 17.4
before_script:
  # Set download location
  - export PLT_FILENAME=elixir-${TRAVIS_ELIXIR_VERSION}_${TRAVIS_OTP_RELEASE}.plt
  - export PLT_LOCATION=/home/travis/$PLT_FILENAME
  # Download PLT from danielberkompas/travis_elixir_plts on Github
  # Store in $PLT_LOCATION
  - wget -O $PLT_LOCATION https://raw.github.com/danielberkompas/travis_elixir_plts/master/$PLT_FILENAME
script:
  - mix test
  - dialyzer --no_check_plt --plt $PLT_LOCATION --no_native _build/test/lib/$YOUR_PROJECT_NAME/ebin
```

Where `_build/test/lib/$YOUR_PROJECT_NAME/ebin` is the location of your compiled
BEAM files.

## Generate Your Own
The tool used to build these PLTs is also available on Github:

<https://github.com/danielberkompas/travis_elixir_plt_generator>

